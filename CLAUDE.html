<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>norman: Warwick Statistics Module Marks Analysis Package • norman</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="norman: Warwick Statistics Module Marks Analysis Package"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">norman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9027</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="articles/norman.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>norman: Warwick Statistics Module Marks Analysis Package</h1>

    </div>

<div id="norman-warwick-statistics-module-marks-analysis-package" class="section level1">

<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a></h2>
<p>The <strong>norman</strong> package is a specialized R tool designed for the Department of Statistics at the University of Warwick to generate comprehensive PDF reports analyzing module examination marks. The package implements a robust statistical methodology based on median differences to identify “module effects” (relative difficulty across modules) while accounting for varying student abilities, enabling fair comparisons across different courses taken by overlapping student cohorts.</p>
</div>
<div class="section level2">
<h2 id="core-functions">Core Functions<a class="anchor" aria-label="anchor" href="#core-functions"></a></h2>
<div class="section level3">
<h3 id="data-input-and-validation">Data Input and Validation<a class="anchor" aria-label="anchor" href="#data-input-and-validation"></a></h3>
<p><strong><code>print_path(folder)</code></strong> Returns and displays the full absolute path to a specified folder, formatting it in a hierarchical structure for readability in reports.</p>
<p><strong><code>print_file_listing(folder)</code></strong> Scans a folder for CSV files and returns a formatted table showing filenames with their last modification timestamps, providing audit trail information for the data sources used in each report.</p>
<p><strong><code>check_modules_expected(working_directory, module_codes)</code></strong> Validates the marks data against an expected module list by reading <code>modules_expected_here.txt</code> and identifying any unexpected extra modules or missing expected modules, helping catch data errors early.</p>
</div>
<div class="section level3">
<h3 id="statistical-analysis-functions">Statistical Analysis Functions<a class="anchor" aria-label="anchor" href="#statistical-analysis-functions"></a></h3>
<p><strong><code>meddiff(xmat, threshold = 5)</code></strong> Computes a matrix of pairwise median within-student differences between all module pairs. For each pair of modules, it calculates the median of the mark differences across students who took both modules, requiring at least <code>threshold</code> students for a valid comparison. This forms the foundation of the module effects analysis.</p>
<p><strong><code>meddiff_for_display(xmat, threshold = 5)</code></strong> Produces a display-oriented version of median differences, formatting the results as a list where each module shows its comparisons with other modules along with student counts, optimized for inclusion in the report tables.</p>
<p><strong><code>meddiff_fit(m)</code></strong> Fits a weighted least-squares linear model to the median differences matrix to extract module effects. This estimates a single difficulty parameter for each module that best explains all pairwise median differences, with weights proportional to the number of student pairs underlying each median.</p>
<p><strong><code>get_module_effects(module_codes, mdd)</code></strong> Extracts and formats the fitted module effects from the model, centering them around their median (setting it to zero) and creating a ranked table showing relative difficulty from easiest to hardest, along with the count of comparisons available for each module.</p>
<p><strong><code>print_module_effect(module_code, mdf)</code></strong> Retrieves the module effect for a specific module and formats it as a human-readable string (e.g., “plus 5.2” or “minus 3.7”) for inclusion in individual module reports.</p>
<p><strong><code>list_all_median_differences(mdd)</code></strong> Prints a comprehensive listing of all computed median differences between module pairs, organized by module, providing complete transparency into the underlying data used for the module effects calculation.</p>
</div>
<div class="section level3">
<h3 id="summary-statistics-functions">Summary Statistics Functions<a class="anchor" aria-label="anchor" href="#summary-statistics-functions"></a></h3>
<p><strong><code>raw_mark_summaries(marks_matrix)</code></strong> Computes an eight-number summary for each module including sample size, number of zeros, quartiles, maximum, mean, and standard deviation, providing a comprehensive overview of the mark distribution for each module.</p>
<p><strong><code>raw_mark_classes(marks_matrix, dp = 0)</code></strong> Calculates the percentage of students falling into each UK degree classification range (zero, 1-39, 40-49, 50-59, 60-69, 70+) for every module, revealing how marks distribute across conventional performance categories.</p>
</div>
<div class="section level3">
<h3 id="visualization-functions">Visualization Functions<a class="anchor" aria-label="anchor" href="#visualization-functions"></a></h3>
<p><strong><code>stemleaf(module_code, module_marks)</code></strong> Generates a stem-and-leaf plot for a specific module’s marks, providing a compact visual representation of the distribution that preserves actual data values, useful for quickly identifying patterns and outliers.</p>
<p><strong><code>scatter(module_code, marks_matrix, student_overall_median)</code></strong> Creates a ggplot2 scatterplot comparing each student’s mark in a specific module against their overall median mark across all modules taken. Points above the diagonal line indicate better-than-expected performance; points below indicate worse-than-expected performance. For final year cohorts, the plot uses color coding to distinguish between degree program types (BSc, MSc, M 3rd year, M 4th year).</p>
</div>
<div class="section level3">
<h3 id="report-generation-functions">Report Generation Functions<a class="anchor" aria-label="anchor" href="#report-generation-functions"></a></h3>
<p><strong><code>make_module_pages(working_directory, module_codes, module_names, keep_tmpdir = FALSE)</code></strong> The master function that orchestrates individual module report generation. It reads a module-specific R Markdown template, customizes it for each module by substituting module codes and names, renders each template using <code><a href="https://rdrr.io/pkg/knitr/man/knit_child.html" class="external-link">knitr::knit_child()</a></code>, and returns the compiled R Markdown content ready for inclusion in the final PDF document.</p>
</div>
<div class="section level3">
<h3 id="utility-functions">Utility Functions<a class="anchor" aria-label="anchor" href="#utility-functions"></a></h3>
<p><strong><code>update(build_opts = "--no-build-vignettes", ...)</code></strong> Provides a convenient wrapper around <code><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">remotes::install_github()</a></code> for updating the norman package to the latest version from the GitHub repository, simplifying package maintenance for users.</p>
</div>
</div>
<div class="section level2">
<h2 id="how-the-report-generation-process-works">How the Report Generation Process Works<a class="anchor" aria-label="anchor" href="#how-the-report-generation-process-works"></a></h2>
<p>The norman package follows a structured workflow to transform raw CSV mark files into a comprehensive analytical report:</p>
<div class="section level3">
<h3 id="id_1-data-ingestion-phase">1. Data Ingestion Phase<a class="anchor" aria-label="anchor" href="#id_1-data-ingestion-phase"></a></h3>
<p>The process begins when a user creates an R Markdown document from the norman template (<code>skeleton.Rmd</code>). This template references <code>report_body_material.Rmd</code>, which orchestrates the entire analysis. The system first calls <code><a href="reference/print_path.html">print_path()</a></code> and <code><a href="reference/print_file_listing.html">print_file_listing()</a></code> to document the data sources, then reads all CSV files from the <code>marks/</code> subfolder, extracting <code>sprCode</code> (student identifier) and <code>overallMark</code> columns. These individual module mark files are consolidated into a single <code>marks_matrix</code> where rows represent students and columns represent modules, with <code>NA</code> values for module-student combinations where the student did not take that module.</p>
</div>
<div class="section level3">
<h3 id="id_2-validation-phase">2. Validation Phase<a class="anchor" aria-label="anchor" href="#id_2-validation-phase"></a></h3>
<p>Before analysis begins, <code><a href="reference/check_modules_expected.html">check_modules_expected()</a></code> validates that the marks data matches expectations by comparing found modules against the <code>modules_expected_here.txt</code> file, and the system verifies that all module codes have corresponding names in <code>module_names.csv</code>. Any discrepancies are prominently reported at the top of the document to alert users to potential data issues.</p>
</div>
<div class="section level3">
<h3 id="id_3-descriptive-statistics-phase">3. Descriptive Statistics Phase<a class="anchor" aria-label="anchor" href="#id_3-descriptive-statistics-phase"></a></h3>
<p>The report then provides a comprehensive overview of all modules. <code><a href="reference/raw_mark_summaries.html">raw_mark_summaries()</a></code> generates traditional statistical summaries (quartiles, means, standard deviations), while <code><a href="reference/raw_mark_classes.html">raw_mark_classes()</a></code> shows the distribution across UK degree classification boundaries. These tables allow quick identification of modules with unusual mark distributions before diving into comparative analysis.</p>
</div>
<div class="section level3">
<h3 id="id_4-module-effects-analysis-phase">4. Module Effects Analysis Phase<a class="anchor" aria-label="anchor" href="#id_4-module-effects-analysis-phase"></a></h3>
<p>This is the analytical heart of the package. The process:</p>
<ul><li>Calls <code><a href="reference/meddiff.html">meddiff()</a></code> to compute all pairwise median differences between modules based on students who took both modules in each pair</li>
<li>Calls <code><a href="reference/meddiff_fit.html">meddiff_fit()</a></code> to fit a least-squares model that finds a single “module effect” parameter for each module that best explains all the median differences</li>
<li>Uses <code><a href="reference/get_module_effects.html">get_module_effects()</a></code> to extract and rank these effects from easiest to hardest, centered around a median of zero</li>
<li>Generates a Q-Q plot to assess whether the distribution of module effects is consistent with natural variation (normally distributed) or contains outliers deserving special attention</li>
<li>Calls <code><a href="reference/list_all_median_differences.html">list_all_median_differences()</a></code> to provide complete transparency by printing every pairwise comparison underlying the fitted effects</li>
</ul><p>This methodology is more robust than simple mean comparisons because it uses medians (resistant to outliers) and leverages within-student differences (controlling for overall student ability differences across cohorts).</p>
</div>
<div class="section level3">
<h3 id="id_5-individual-module-pages-phase">5. Individual Module Pages Phase<a class="anchor" aria-label="anchor" href="#id_5-individual-module-pages-phase"></a></h3>
<p>The final section creates a detailed page for each module in landscape orientation. <code><a href="reference/make_module_pages.html">make_module_pages()</a></code>:</p>
<ul><li>Reads the <code>module-template.Rmd</code> template file</li>
<li>For each module, creates a customized copy substituting the actual module code and name</li>
<li>Saves each to a temporary directory</li>
<li>Renders each using <code><a href="https://rdrr.io/pkg/knitr/man/knit_child.html" class="external-link">knitr::knit_child()</a></code>
</li>
<li>Collects all rendered output into a single character vector</li>
</ul><p>Each individual module page combines multiple visualizations and statistics:</p>
<ul><li>
<code><a href="reference/scatter.html">scatter()</a></code> creates a scatterplot showing how each student’s mark in this module compares to their overall median performance</li>
<li>
<code><a href="reference/stemleaf.html">stemleaf()</a></code> provides a stem-and-leaf display of the raw mark distribution</li>
<li>
<code><a href="reference/print_module_effect.html">print_module_effect()</a></code> reports the fitted module effect in human-readable form</li>
<li>Selected rows from the <code><a href="reference/raw_mark_summaries.html">raw_mark_summaries()</a></code> and <code><a href="reference/raw_mark_classes.html">raw_mark_classes()</a></code> tables show this module’s statistics</li>
</ul></div>
<div class="section level3">
<h3 id="id_6-document-assembly-and-rendering">6. Document Assembly and Rendering<a class="anchor" aria-label="anchor" href="#id_6-document-assembly-and-rendering"></a></h3>
<p>The main R Markdown document uses <code>knitr</code> to execute all code chunks in sequence, assembling:</p>
<ol style="list-style-type: decimal"><li>Title page with report metadata, author, and remarks</li>
<li>Data source documentation</li>
<li>Data validation results</li>
<li>Overall summary tables for all modules</li>
<li>Module effects analysis with rankings and Q-Q plot</li>
<li>Complete listing of median differences</li>
<li>Individual module pages (one per module in landscape)</li>
</ol><p>The final <code>knit</code> operation converts this R Markdown document to PDF via LaTeX, producing a publication-ready report suitable for examination board meetings and scaling committee decisions.</p>
</div>
<div class="section level3">
<h3 id="design-philosophy">Design Philosophy<a class="anchor" aria-label="anchor" href="#design-philosophy"></a></h3>
<p>The package embodies several key design principles:</p>
<ul><li>
<strong>Reproducibility</strong>: All data sources and timestamps are documented</li>
<li>
<strong>Transparency</strong>: All statistical methods and raw data are exposed in the report</li>
<li>
<strong>Robustness</strong>: Median-based methods resist influence from outliers or small numbers of unusual marks</li>
<li>
<strong>Fairness</strong>: Within-student comparisons control for ability differences across cohorts</li>
<li>
<strong>Usability</strong>: Template-based approach requires minimal R knowledge from users</li>
<li>
<strong>Auditability</strong>: Validation checks catch common data errors early</li>
</ul><p>This architecture enables statistics administrators to generate standardized, rigorous analytical reports with minimal manual intervention while maintaining full transparency into the methodology and underlying data.</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Firth, Ella Kaye.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

