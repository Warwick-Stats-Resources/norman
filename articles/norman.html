<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Making a Report on a Set of Module Marks • norman</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Making a Report on a Set of Module Marks">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">norman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9027</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/norman.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/warwick-stats-resources/norman/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Making a Report on a Set of Module Marks</h1>
                        <h4 data-toc-skip class="author">David
Firth</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/warwick-stats-resources/norman/blob/main/vignettes/norman.Rmd" class="external-link"><code>vignettes/norman.Rmd</code></a></small>
      <div class="d-none name"><code>norman.Rmd</code></div>
    </div>

    
    
<p>Here are instructions for using the <strong>norman</strong> package,
to generate a report (in PDF) on any given set of exam marks.</p>
<p>This is <strong>all</strong> specific to the administration of
courses in the Department of Statistics at the University of Warwick. It
is of no conceivable interest to anyone else.</p>
<p>I recommend reading the whole document before doing anything — to get
the idea of how all this is meant to work.</p>
<div class="section level2">
<h2 id="setup-your-rstudio-and-latex-if-not-done-already">0. Setup your <em>RStudio</em> and <em>LaTeX</em> (if not done
already)<a class="anchor" aria-label="anchor" href="#setup-your-rstudio-and-latex-if-not-done-already"></a>
</h2>
<p>The instructions below (from step 1 onwards) will all assume that you
have a functioning installation of <em>R</em>, <em>Rtools</em>,
<em>RStudio</em> and <em>LaTeX</em> — specifically, a setup that is
capable of “knitting” an <em>R Markdown</em> (<code>.Rmd</code>) file to
a PDF output document. (A part of that setup with be the installation of
the <em>R</em> add-on package <strong>rmarkdown</strong>.)</p>
<p>These installations are all fairly standard. Our IT support staff
should be able to handle it without problem.</p>
<p>It’s probably best to test your setup on a relatively <em>simple</em>
R Markdown document, such as the one you get when selecting <strong>File
–&gt; New file –&gt; R markdown</strong> in Rstudio’s menu. With such a
file open in the <em>RStudio</em> editor, try doing <strong>Knit to
PDF</strong> (from the “Knit” menu).</p>
<p>In Windows, setting up these things seems sometimes to be
problematic, I don’t know why. But there are plenty of tips available
online (e.g., <a href="https://rickpackblog.wordpress.com/2017/10/04/miktex-install-for-r-windows-pdf-output-r-markdown/" class="external-link uri">https://rickpackblog.wordpress.com/2017/10/04/miktex-install-for-r-windows-pdf-output-r-markdown/</a>
). Good luck with it! Thankfully you’ll only need to do it once — until
you get a new computer, of course.</p>
</div>
<div class="section level2">
<h2 id="add-the-norman-package-to-your-r-installation">0.5. Add the <strong>norman</strong> package to your <em>R</em>
installation<a class="anchor" aria-label="anchor" href="#add-the-norman-package-to-your-r-installation"></a>
</h2>
<div class="section level3">
<h3 id="installing-norman">0.5.1 Installing <strong>norman</strong><a class="anchor" aria-label="anchor" href="#installing-norman"></a>
</h3>
<p>The package <strong>norman</strong> builds Warwick Statistics reports
on exam marks.</p>
<p>To install <strong>norman</strong> for the first time: in your
<em>R</em> Console (which is one of the panes in the <em>RStudio</em>
window), paste the following and hit return:</p>
<pre><code><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="st">"remotes"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span>,<span class="st">"Package"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Warwick-Stats-Resources/norman"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>The installation of <strong>norman</strong> should also trigger the
installation of five other packages if you do not have them already.
They are <strong>aplpack</strong>, <strong>ggplot2</strong>,
<strong>dplyr</strong>, <strong>readr</strong>, and
<strong>scales</strong>.</p>
</div>
<div class="section level3">
<h3 id="installing-rmarkdown-if-you-have-not-done-it-already-in-step-0">0.5.2 Installing <strong>rmarkdown</strong> (if you have not done it
already in step 0)<a class="anchor" aria-label="anchor" href="#installing-rmarkdown-if-you-have-not-done-it-already-in-step-0"></a>
</h3>
<p>Again in your <em>R</em> console:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rmarkdown"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="updating-norman">0.5.9 <em>Updating</em> <strong>norman</strong><a class="anchor" aria-label="anchor" href="#updating-norman"></a>
</h3>
<p>This will be needed only later, whenever the <strong>norman</strong>
package itself has been updated to a new version — for example, after
<strong>norman</strong> has been improved to fix bugs or to add new
features to the reports it makes. If you have only just installed
<strong>norman</strong> (as detailed above), you should <em>skip this
section for now but keep it in mind for when needed.</em></p>
<p>Whenever you <em>do</em> find the need to update
<strong>norman</strong>, in your <em>R</em> console just issue the
following command:</p>
<pre><code><span><span class="fu">norman</span><span class="fu">::</span><span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="make-a-separate-folder-for-each-report-that-you-will-prepare-if-not-made-already">1. Make a separate folder for each report that you will prepare (if
not made already)<a class="anchor" aria-label="anchor" href="#make-a-separate-folder-for-each-report-that-you-will-prepare-if-not-made-already"></a>
</h2>
<p>In 2019 for example, you might want to have folders named something
like</p>
<ul>
<li><em>2019_Second_Year_marks_before_scaling</em></li>
<li><em>2019_Second_Year_marks_after_scaling</em></li>
<li><em>2019_Finals_and_MSc_marks_before_scaling</em></li>
<li><em>2019_Finals_and_MSc_marks_after_scaling</em></li>
</ul>
<p>— but the names can be chosen freely, depending on your specific
filing needs. The name of each folder should indicate clearly <em>which
marks</em> will be used in making the corresponding report.</p>
<p>You can have as many of these folders as you want — it just needs to
be <em>one folder for each report that you want to make</em>. Each
folder will be a separate “project” (in the terminology of
<em>RStudio</em>).</p>
</div>
<div class="section level2">
<h2 id="decide-which-report-you-want-to-make-first-or-next">2. Decide which report you want to make first (or next)<a class="anchor" aria-label="anchor" href="#decide-which-report-you-want-to-make-first-or-next"></a>
</h2>
<p>This determines <em>which</em> of the folders you made will be the
one that you will be working in next. That folder will be called
<strong>your current working folder</strong> in what follows (and the
report that you want to make in that folder will be called <strong>your
current report</strong>).</p>
</div>
<div class="section level2">
<h2 id="the-data-requirements-for-making-one-report">3. The data requirements for making one report<a class="anchor" aria-label="anchor" href="#the-data-requirements-for-making-one-report"></a>
</h2>
<div class="section level3">
<h3 id="all-reports">All reports<a class="anchor" aria-label="anchor" href="#all-reports"></a>
</h3>
<p>Your working folder must contain <strong>the following three
things</strong>. (Other things can be there too, for example your own
notes or whatever; but the software won’t work properly without the 3
things listed below.)</p>
<div class="section level4">
<h4 id="a--a-subfolder-containing-the-mark-sheets">3a. A subfolder containing the mark sheets<a class="anchor" aria-label="anchor" href="#a--a-subfolder-containing-the-mark-sheets"></a>
</h4>
<p>The most essential input to this report-building package is a
subfolder containing exam marks.</p>
<p>The subfolder should be named simply as <code>marks</code>. If you
give it any other name, the software will not work. (This is
deliberate.)</p>
<p>The folder can contain any number of comma-separated-values
(<code>.csv</code>) files. Each such file must have a name that starts
with the 5-character code for a module, for example
<code>ST344_raw_marks_2019.csv</code>. The rest of each file name (after
the first 5 characters, before <code>.csv</code>) can be anything,
within reason.</p>
<p>Each of the <code>.csv</code> files must contain <em>at least</em>
columns named <code>sprCode</code> and <code>overallMark</code> — these
being the columns that identify students, and give each student’s mark
in the module. Any other columns present in the <code>.csv</code> files
will simply be ignored.</p>
</div>
<div class="section level4">
<h4 id="b--a-sheet-of-module-names">3b. A sheet of module names<a class="anchor" aria-label="anchor" href="#b--a-sheet-of-module-names"></a>
</h4>
<p>This must be a comma-separated-values file named
<code>module_names.csv</code> file with 2 columns, headed
<code>ModuleCode</code> and <code>ModuleName</code>.</p>
<p>This file <em>must</em> provide a module name for (at least) each
module code that will be found in the <code>marks</code> folder for the
current report. (Different <code>module_names.csv</code> files can be
used in different reports, if needed.)</p>
<p>(The <code>module_names.csv</code> file <em>can</em> safely contain
also module codes/names that are not relevant to your current report —
they will simply be ignored.)</p>
</div>
<div class="section level4">
<h4 id="c--a-list-of-the-modules-that-are-expected-to-be-found-in-the-marks-folder-for-this-report">3c. A list of the modules that are expected to be found in the marks
folder for this report<a class="anchor" aria-label="anchor" href="#c--a-list-of-the-modules-that-are-expected-to-be-found-in-the-marks-folder-for-this-report"></a>
</h4>
<p>This must be a simple, plain text file named
<code>modules_expected_here.txt</code> (a file made, for example, with
<em>Notepad+</em>). It should contain one 5-character module code on
each line.</p>
<p>The modules listed in this file should be all the ones that are
relevant to your current report.</p>
<p>This file is used only for <em>checking</em> purposes, to provide a
warning if either</p>
<ul>
<li>the marks folder contains some modules that were not expected</li>
<li>some modules that <em>were</em> expected are missing from the marks
folder.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="for-reports-where-students-are-grouped-in-the-scatter-plots-e-g---final-year-reports">For reports where students are grouped in the scatter plots (e.g..
final year reports)<a class="anchor" aria-label="anchor" href="#for-reports-where-students-are-grouped-in-the-scatter-plots-e-g---final-year-reports"></a>
</h3>
<p>If a grouping is desired for the scatter plots on the module pages,
the following <strong>two files</strong> must <strong>both</strong> be
in the working folder.</p>
<div class="section level4">
<h4 id="d--a-file-linking-each-student-with-their-course">3d. A file linking each student with their course<a class="anchor" aria-label="anchor" href="#d--a-file-linking-each-student-with-their-course"></a>
</h4>
<p>This must be a file named <code>student_course.csv</code>, with two
columns, <code>ID</code> and <code>Course</code>.</p>
<p><code>ID</code> is the 7-digit student ID number. <code>Course</code>
is their course code, e.g. “USTA-G302”.</p>
</div>
<div class="section level4">
<h4 id="e--a-file-linking-course-codes-with-the-groupings-for-the-scatter-plots">3e. A file linking course codes with the groupings for the scatter
plots<a class="anchor" aria-label="anchor" href="#e--a-file-linking-course-codes-with-the-groupings-for-the-scatter-plots"></a>
</h4>
<p>This must be a file named <code>course_mappings.csv</code>, with two
columns, <code>Course</code> and <code>Group</code>.</p>
<p><code>Course</code> is a course code, e.g. “USTA-G302”. There should
be one course code for each (unique) <code>Course</code> in
<code>student_course.csv</code>. <code>Group</code> is whatever grouping
is needed for the scatter plots of module marks against the median of ST
modules taken, as it appears on each individual module page of the
report. This will likely be degree types, e.g. “BSc”, “IM”.</p>
</div>
</div>
<div class="section level3">
<h3 id="for-saving-history">For saving history<a class="anchor" aria-label="anchor" href="#for-saving-history"></a>
</h3>
<p>If you wish to save the marks summaries and module effects with the
[save_history()] function, the working folder <em>must</em> contain a
file with the year and <em>may</em> already contain the history. Note
that neither of these files are needed to knit the report.</p>
<div class="section level4">
<h4 id="f--a-file-with-the-year">3f. A file with the year<a class="anchor" aria-label="anchor" href="#f--a-file-with-the-year"></a>
</h4>
<p>This must be called <code>year.txt</code> and contain exactly one
line of text, with the 4-digit year of exam marks in the
<code>marks</code> folder, e.g. 2025.</p>
</div>
<div class="section level4">
<h4 id="g--a-file-with-the-marks-history">3g. A file with the marks history<a class="anchor" aria-label="anchor" href="#g--a-file-with-the-marks-history"></a>
</h4>
<p>This file must be called <code>history.csv</code>.</p>
<p>If there is no file called <code>history.csv</code> in the working
folder, a <code>history.csv</code> file will be created the first time
you call <code><a href="../reference/save_history.html">save_history()</a></code>, with the 8-number summary and
module effects for the year in <code>year.txt</code>. If you call
<code><a href="../reference/save_history.html">save_history()</a></code> again in the same year, you will have the
option to either overwrite the currently saved data or not.</p>
<p>This <code>history.csv</code> file should be copied into the RStudio
projects for future years. Then, when <code><a href="../reference/save_history.html">save_history()</a></code> is
called in that year, the data will be appended.</p>
<p>No data will be deleted from <code>history.csv</code>, but only the
most recent five years will be shown on the history pages of the
report.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="start-up-rstudio-and-make-a-new-rstudio-project-if-not-made-already">4. Start up RStudio and make a new RStudio project (if not made
already)<a class="anchor" aria-label="anchor" href="#start-up-rstudio-and-make-a-new-rstudio-project-if-not-made-already"></a>
</h2>
<p>From the <strong>File</strong> menu in <em>RStudio</em>, pick
<strong>New Project</strong> and then <strong>Existing
Directory</strong>. Then browse to your current working folder and click
<strong>Create Project</strong>.</p>
</div>
<div class="section level2">
<h2 id="make-a-new-r-markdown-document-for-your-current-report">5. Make a new R Markdown document for your current report<a class="anchor" aria-label="anchor" href="#make-a-new-r-markdown-document-for-your-current-report"></a>
</h2>
<p>Still in <em>RStudio</em>: <strong>File -&gt; New File -&gt; R
Markdown -&gt; From Template</strong>, then from the menu pick the item
<strong>Warwick Stats report on module marks</strong>.</p>
<p>This will open up a template <code>.Rmd</code> file for editing.</p>
<p>In that template there are 3 places labelled <strong>????</strong>
where you will want to make appropriate edits. (The edits can be done at
a later time, if you want to see your report first.) These edits will
provide:</p>
<ul>
<li>the <strong>title</strong> of your report</li>
<li>the <strong>author</strong> of the report (i.e., who it was prepared
by)</li>
<li>any <strong>remarks</strong> that you might want to appear at the
top of the report (for example, about the report’s status, about any
data that’s missing, or whatever else you might want to note
there).</li>
</ul>
<p>When you have finished editing those 3 things, or if you have decided
to postpone that editing until later, pick <strong>File -&gt; Save
as…</strong> and save your <code>.Rmd</code> file into your current
working folder, with a name that will clearly identify your report. (For
example, <code>2019_Second_year_marks_report_before_scaling.Rmd</code> —
or whatever you want, but it must have the file extension
<code>.Rmd</code>.)</p>
</div>
<div class="section level2">
<h2 id="make-the-report">6. Make the report<a class="anchor" aria-label="anchor" href="#make-the-report"></a>
</h2>
<p>Just click on <strong>Knit</strong> at the top of your
<em>RStudio</em> window.</p>
<p>If all goes well, this will make your report as a PDF document in
your current working folder (with the same name as your
<code>.Rmd</code> file, but with the <code>.pdf</code> extension
replacing <code>.Rmd</code>).</p>
</div>
<div class="section level2">
<h2 id="re-making-a-report-after-some-of-the-data-has-changed-or-after-you-have-made-edits">7. Re-making a report after some of the data has changed, or after
you have made edits<a class="anchor" aria-label="anchor" href="#re-making-a-report-after-some-of-the-data-has-changed-or-after-you-have-made-edits"></a>
</h2>
<p>When the data has changed (for whatever reason), or when you want to
make fresh edits to the title, author or remarks fields of the report,
you can update your report just by opening the <code>.Rmd</code> file
(in <em>RStudio</em>). Make any necessary edits and then click
<strong>Knit</strong> to save the report and re-make the PDF
document.</p>
<p>Note that this will <strong>over-write</strong> your previous report.
So if you want to keep the previous PDF, you should re-name it first,
before updating the report as described above.</p>
</div>
<div class="section level2">
<h2 id="save-the-module-summaries-and-effects">8. Save the module summaries and effects<a class="anchor" aria-label="anchor" href="#save-the-module-summaries-and-effects"></a>
</h2>
<p>Check there is a <code>year.txt</code> file in the working folder
(see point 3f above) and (optionally) a <code>history.csv</code> file
(see point 3g).</p>
<p>In the RStudio console, run:</p>
<pre><code><span><span class="fu">norman</span><span class="fu">::</span><span class="fu"><a href="../reference/save_history.html">save_history</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="problems">9. Problems?<a class="anchor" aria-label="anchor" href="#problems"></a>
</h2>
<p>Ask Jon Forster, Ella Kaye or David Firth for advice (in that
order!), if any of the above is unclear or does not work.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Firth, Ella Kaye.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
